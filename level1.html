<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>LEVEL 1 | TECHNOVA 6.0</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <style>
      
    </style>
  </head>
  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="d-flex align-items-center">
      <div class="container d-flex align-items-center justify-content-between">
        <div class="logo">
          <a href="index.html"
            ><img src="assets/img/logo.png" alt="" class="img-fluid"
          /></a>
        </div>

        <nav id="navbar" class="navbar">
          <ul>
            <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
            <li>
              <a class="nav-link scrollto" href="levels.html">Dashboard</a>
            </li>
            <!-- <li><a class="nav-link scrollto" href="#services">Services</a></li> -->
            <!-- <li><a class="nav-link scrollto " href="#portfolio">Portfolio</a></li> -->
            <!-- <li><a class="nav-link scrollto" href="#team">Team</a></li> -->
            <!-- <li><a class="nav-link scrollto" href="#pricing">Pricing</a></li> -->
            <li class="dropdown">
              <a href="#"
                ><span>LEVEL 1 SCORES</span> <i class="bi bi-chevron-down"></i
              ></a>
              <ul class="sub-menu"></ul>
            </li>
            <!-- <li><a class="nav-link scrollto" href="#contact">Contact</a></li> -->
            <li class="score-card"><div id="score">--</div></li>
          </ul>
          <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
        <!-- .navbar -->
      </div>
    </header>
  </body>
  <section id="card-section" style="align-items: center">
    <div class="levelh1">LEVEL 1 | TECHNOVA 6.0</div>
    <p style="text-align: center; color: red;">Ensure to read guidelines before starting</p>
    <div class="card-row" style="justify-content: center; gap: calc(100px)">
      <!-- card 1--------------------------- -->
      <div class="card">
        <div class="card__border"></div>
        <div class="card_title__container">
          <span class="card_title">Stage 1 </span>
          <p class="card_paragraph" style="font-size: medium">
            STAGE | &nbsp; <b> MCQ</b>
          </p>
        </div>
        <hr class="line" />
        <ul class="card__list">
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">This round carry total 50 points</span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">Total 25 questions</span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">2 marks for each questions </span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">NO negative mark</span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">Ensure before submit</span>
          </li>
        </ul>
        <span id="errorMessage" style="font-size: medium"></span>
        <a href="level1_s1.html"
          ><button id="stage1Button" class="button">START  GAME</button></a
        >
      </div>
      <!-- card 2--------------------------- -->
      <div class="card">
        <div class="card__border"></div>
        <div class="card_title__container">
          <span class="card_title">Stage 1 </span>
          <p class="card_paragraph" style="font-size: medium">
            STAGE | &nbsp; <b> JIGSAW PUZZLE </b>
          </p>
        </div>
        <hr class="line" />
        <ul class="card__list">
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text"> This round carry total 50 points</span>
            <span class="list_text"></span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">No numerical order</span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">No time limit</span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">Only correct pieces will join </span>
          </li>
          <li class="card__list_item">
            <span class="check">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="currentColor"
                class="check_svg"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"
                  clip-rule="evenodd"
                ></path>
              </svg>
            </span>
            <span class="list_text">Ensure before submit</span>
          </li>
        </ul>
        <span id="errorMessage" style="font-size: medium"></span>
        <a href="level1_s2.html"
          ><button id="stage2Button" class="button">START GAME</button></a
        >
      </div>
      <div id="score"></div>
    </div>
  </section>
  <div style="display: flex; align-items: center; justify-content: center; padding-top: -330px;">
    <a href="level2.html" id="nextlevel" style="display: none">
      <button class="button" id="nextlevel">GO TO NEXT LEVEL</button></a>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        // fetch("http://localhost:7000/api/user/profile", {
          fetch("https://technova-backend.onrender.com/api/user/profile", {


        headers: {
          authorization: localStorage.getItem("token"),
        },
      })
        .then((response) => response.json())
        .then((data) => {
          const level1scores = data?.user?.roundsCompleted
            ?.filter((score) => score.level == 1)
            ?.sort((a, b) => a.round - b.round);

          const finishedRounds = level1scores?.map((r) => r.round);
          finishedRounds.map((round, idx) => {
            const stageButton = document.getElementById(`stage${round}Button`);
            stageButton.textContent = `Stage ${round} Completed (score: ${level1scores[idx]?.score})`;

            stageButton.style.background = "#4CAF50";
            stageButton.style.fontSize = "medium";
            stageButton.style.cursor = "not-allowed";
            stageButton.parentElement.removeAttribute("href");
            stageButton.onclick = function (event) {
              event.preventDefault(); // Prevent the default action of the button
              return false; // Return false to prevent further propagation
            };
          });

          const submenu = document.querySelector(".sub-menu");

          if (level1scores?.length == 0) {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.innerText = `No rounds finished in this level.`;
            li.appendChild(a);
            submenu.appendChild(li);
          }
          level1scores.map((score) => {
            const li = document.createElement("li");
            const a = document.createElement("a");

            a.innerText = `Round ${score.round} : ${score?.score}`;
            li.appendChild(a);
            submenu.appendChild(li);
          });

          const l2total = level1scores?.reduce(
            (prev, current) => prev + current.score,
            0
          );

          document.getElementById("score").innerText = `Level 1 Total Score: ${l2total} points`;

          const l1_s2Completed = localStorage.getItem("l1_s2Completed");
          const l1_s1Completed = localStorage.getItem("l1_s1Completed");

          const l1TotalRounds = 2;
          if (level1scores?.length == l1TotalRounds) {
            const nextLevelLink = document.getElementById("nextlevel");
            nextLevelLink.style.display = "block";
          }
        })
        .catch((error) => {
          console.error("Error:", error);
        });
    });
  </script>
</html>
