<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Technova</title>
    <link href="assets/img/favicon.png" rel="icon">
  </head>
  <body>
    <p>Event status</p>
    <p id="eventStatus"></p>
    <button id="eventToggle">Toggle event status</button>
  </body>

  <script>
    function getAndUpdateEventStatus() {
      // fetch("http://localhost:7000/api/eventover/iseventOver").then((response) => {
        fetch("https://technova-backend.onrender.com/api/eventover/iseventOver").then((response) => {

        response.json().then((data) => {
          const eventStatusP = document.getElementById("eventStatus");
          const eventIsOver = data?.over;
          if (eventIsOver) {
            eventStatusP.innerText = "Event is over";
          } else {
            eventStatusP.innerText = "Event is still going on";
          }
        });
      });
    }
    document.addEventListener("DOMContentLoaded", () => {
      getAndUpdateEventStatus();

      const eventTOggleButton = document.getElementById("eventToggle");
      eventTOggleButton.addEventListener("click", () => {
        eventTOggleButton.disabled = true;
        fetch("http://localhost:7000/api/eventover/toggleeventOver").then((response) => {
          getAndUpdateEventStatus();
          eventTOggleButton.disabled = false;
        });
      });
    });
  </script>
</html>